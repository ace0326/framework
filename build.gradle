/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
//    id "org.springframework.boot" version "2.2.7.RELEASE"
    id "io.spring.dependency-management" version "1.0.9.RELEASE"
}

ext {
    lombokVersion = "1.18.12"
}

allprojects {
    group = 'com.sky.framework'
    version = '1.0.2-SNAPSHOT'
}


subprojects {
    apply plugin: 'java'
    apply plugin: 'checkstyle'
    apply plugin: "jacoco"
    apply plugin: 'maven-publish'
    apply plugin: "io.spring.dependency-management"

    dependencyManagement {
        imports {
            mavenBom "org.springframework.boot:spring-boot-dependencies:2.2.7.RELEASE"
        }
        dependencies {
//            dependencySet(group: 'org.slf4j', version: '1.7.7') {
//                entry 'slf4j-api'
//                entry 'slf4j-simple'
//            }
            dependency "mysql:mysql-connector-java:8.0.20"
        }
    }

    dependencies {
        implementation "org.projectlombok:lombok:${lombokVersion}"
        annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
    }


    repositories {
        mavenLocal()
        maven {
            url = uri('https://repo.maven.apache.org/maven2')
        }
    }


    java {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
        withSourcesJar()
    }

    checkstyle {
        configFile = file("${rootDir}/style/sky_checkstyle.xml")
        ignoreFailures = true
        showViolations = true
        toolVersion = "8.8"
    }

    publishing {
        publications {
            maven(MavenPublication) {
                from(components.java)
            }
        }
    }

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}
